<script type="text/javascript">
/*Shopify Buy Button function that needs to run for regular and AJAX page loads */
  function ShopifyBuyInit() {
    var client = ShopifyBuy.buildClient({
      domain: 'embeds.myshopify.com',
      apiKey: '952162710f94aa7b7644b14b2a94f4a3',
      appId: '6',
    });

    ShopifyBuy.UI.onReady(client).then(function (ui) {
      ui.createComponent('product', {
        id: [3030475907],
        node: document.getElementById('product-component-05cfb487fb6'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: {
          "product": {
            "styles": {
              "button": {
                "background-color": "#292929",
                ":hover": {"background-color": "#464646"},
                ":focus": {"background-color": "#464646"}
              },
            }
          }
        }
      });
    });
  }

  /* Function that loads the Shopify script and calls the Buy Button code on page load */

(function () {
  var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
  window.ShopifyBuy && window.ShopifyBuy.UI ? ShopifyBuyInit() : loadScript();

  function loadScript() {
    var script = document.createElement('script');
    script.async = true;
    script.src = scriptURL;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
    script.onload = ShopifyBuyInit;
  }
})();

/* Call ShopifyBuyInit() after AJAX page change */
 window.addEventListener("mercury:load", ShopifyBuyInit);
</script>
